<!-- param route is where the router-outlet is defined for search results -->
<!-- <kui-fulltext-search [route]="'/search'"></kui-fulltext-search>

<router-outlet></router-outlet> -->

<div class="container">

    <!-- INPUT -->
    <div class="row">
      <div class="col-md-6 offset-md-4 my-5">
        <form class="d-flex">
          <input  class="form-control form-control-lg mr-2" type="text" #searchInput (keyup.enter)="onSearch(searchInput.value)" />  <!-- # indicate variable -->
          <button class="btn btn-outline-secondary" (click)="onSearch(searchInput.value)"><fa-icon [icon]="faSearch"></fa-icon></button>
        </form>
      </div>
    </div>

    <!-- RESULTS -->
    <div class="row my-5">

      <!-- categories -->
      <div class="col-md-3">
        <div *ngIf="resources && resources.length > 0">

          <ul class="list-group">
            <!-- textes -->
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="textsCheckbox" (click)="showTexts()" [disabled]=textDisabledState>
                <label class="custom-control-label" for="textsCheckbox">Textes</label>
              </div>
              <span class="badge badge-light badge-pill">{{texts.length}}</span>
            </li>
            <!-- mss -->
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="mssCheckbox" (click)="showMss()">
                <label class="custom-control-label" for="mssCheckbox">Manuscrits</label>
              </div>
              <span class="badge badge-light badge-pill">{{mss.length}}</span>
            </li>
            <!-- publications -->
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="pubsCheckbox" (click)="showPersons()">
                <label class="custom-control-label" for="pubsCheckbox">Publications</label>
              </div>
              <span class="badge badge-light badge-pill">0</span>
            </li>
            <!-- persons -->
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="personsCheckbox" (click)="showPersons()" [disabled]=textDisabledState>
                <label class="custom-control-label" for="personsCheckbox">Personnes</label>
              </div>
              <span class="badge badge-light badge-pill">{{persons.length}}</span>
            </li>
            <!-- places -->
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Lieux
              <span class="badge badge-light badge-pill">{{places.length}}</span>
            </li>
            <!-- works -->
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Œuvres
              <span class="badge badge-light badge-pill">{{works.length}}</span>
            </li>
          </ul>
        </div>
      </div>

      <!-- list of results -->
      <div class="col-md-8 offset-md-1">
        
        <div id="personsResults" *ngIf="persons && persons.length > 0">
          <div>
            <strong>Personnes</strong>
            <ul>
              <li *ngFor="let person of persons">
                <a routerLink="/persons/{{ person?.id | encodeURIComponent }}"
                  >{{ person?.name }} {{person?.surname}}
                  ({{ person?.dateOfBirth | knoradatesFormatting }}-{{ person?.dateOfDeath | knoradatesFormatting }})</a
                >
              </li>
            </ul>
          </div>
        </div>
        
        <div id="textsResults" *ngIf="texts && texts.length > 0">
          <div>
            <strong>Textes</strong>
            <ul>
              <li *ngFor="let text of texts">
                <a routerLink="/texts/{{ text?.id | encodeURIComponent }}"
                  [innerHTML]="text?.title | htmlSanitizer"></a
                >
                <!-- to do, delete <p> for better rendering-->
              </li>
            </ul>
          </div>
        </div>

        <div id="mssResults" *ngIf="mss && mss.length > 0">
          <div>
            <strong>Documents d'archive</strong>
            <ul>
              <li *ngFor="let ms of mss">
                <a routerLink="/archive/ms/{{ ms?.id | encodeURIComponent }}">
                <span [innerHTML]="ms?.title | htmlSanitizer"></span>
                  ({{ ms?.archive }}
                  <span [innerHTML]="ms?.shelfmark | htmlSanitizer"></span>)
                  </a
                >
              </li>
            </ul>
          </div>
        </div>

        <div id="msPartsResults" *ngIf="msParts && msParts.length > 0">
          <div>
            <strong>Notes de journal</strong>
            <ul>
              <li *ngFor="let part of msParts">
                {{ part?.title }}
                  (partie de 
                  <a routerLink="/resources/{{ msFromParts?.id | encodeURIComponent }}">{{ msFromParts?.archive }}
                      <span [innerHTML]="msFromParts?.shelfmark | htmlSanitizer"></span>
                  </a>)
              </li>
            </ul>
          </div>
        </div>

        <div id="placesResults" *ngIf="places && places.length > 0">
          <div>
            <strong>Lieux</strong>
            <ul>
              <li *ngFor="let place of places">
                <a routerLink="/places/{{ place?.id | encodeURIComponent }}">
                  {{place?.name}}
                  </a
                >
              </li>
            </ul>
          </div>
        </div>

        <div id="worksResults" *ngIf="works && works.length > 0">
          <div>
            <strong>Œuvres littéraires, d'art et de musique</strong>
            <ul>
              <li *ngFor="let work of works">
                <a routerLink="/works/{{ work?.id | encodeURIComponent }}">
                  <span *ngIf="workAuthors && workAuthors.length > 0">
                    <span *ngFor="let workAuthor of workAuthors | sortBySurname">
                    {{ workAuthor?.name }} {{ workAuthor?.surname }}, </span>
                  </span>
                  <i [innerHtml]="work?.title | removeTextAndPar | htmlSanitizer"></i>
                  <span *ngIf=work?.date>, {{ work?.date | knoradatesYmdFormatting }}</span>
                </a>
              </li>
            </ul>
          </div>
        </div>

        <!--
        <div *ngIf="resources && resources.length > 0">
          <div>
            <strong>Tout</strong>
            <ul>
              <li *ngFor="let resource of resources">
                <a routerLink="/resources/{{ resource?.id | encodeURIComponent }}"
                  >{{resource?.label}}</a
                >
              </li>
            </ul>
          </div>
        </div>
        -->

      </div> <!-- end list of results -->
    </div> <!-- end results -->      


</div> <!-- end container -->

