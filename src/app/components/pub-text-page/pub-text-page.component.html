<div class="container">

    
    <div class="py-4 title"><!-- TITLE, light version of the bibliographical reference -->
        <div *ngIf="periodicalArticle != null"> <!-- bootstrap class: vertical padding 4 -->
            <h3>
                « {{ periodicalArticle?.title }} »
                <!-- , <i>{{ periodicalLight?.title }}</i>,
                {{ periodicalArticle?.date | knoradatesFormatting }}-->
            </h3>
        </div>

        <div *ngIf="book != null"> 
            <h3>
                <i [innerHTML]="book?.title | htmlSanitizer"></i>
                <!-- , {{ book?.date | knoradatesFormatting }}-->
            </h3>
        </div>

        <div *ngIf="bookSection != null"> 
            <h3>
                « <span [innerHTML]="bookSection?.title | htmlSanitizer"></span> »
                <!-- , <i>{{ bookSection?.book }}</i>,
                {{ publisherLight?.name }},
                {{ book?.date | knoradatesFormatting }}-->
            </h3>
        </div>
    </div>
    
    

    <!-- VIEWER -->
    <div class="row" *ngIf="pages && pages.length > 0">

        <div class="col-sm-6 py-4">   
            <div *ngFor="let page of pages">
                <img
                    *ngIf="page.seqnum == selectedPageNum"
                    src="{{ page.imageURL }}"
                    width="500"
                    height="500"
                />
            </div>
            
            <select
            class="form-control"
            name="page-numbers"
            [(ngModel)]="selectedPageNum" 
            > <!-- ngModel binds the value of the select to an angular variable -->

                <option [value]="page.seqnum" *ngFor="let page of pages">
                    Page {{ page.seqnum }}</option
                >
            </select>
        </div>
        
    </div>




    <!-- BIBLIOGRAPHICAL REFERENCE -->
    <div class="py-4">

        <strong>Référence bibliographique</strong>

        <!-- if PERIODICAL ARTICLE -->
        <div *ngIf="periodicalArticle != null"> 
            <p>
                <span *ngFor="let aut of authors | sortBySurname; last as isLast">
                    {{ aut.name }} {{ aut.surname }}<span *ngIf="isLast == false">, </span>
                </span>,
                « {{ periodicalArticle?.title }} », 
                <i>{{ periodicalLight?.title }}</i>,
                n° {{ periodicalArticle?.volume }}<span *ngIf="periodicalArticle?.issue != null">
                    ({{ periodicalArticle?.issue }})</span>,
                <span *ngIf="periodicalArticle?.collaborators != null">{{ periodicalArticle?.collaborators }},</span>
                <!--there is no entry with multiple collaborators even if cardinality would allow it-->
                {{ periodicalArticle?.date | knoradatesYmdFormatting }},
                {{ periodicalArticle?.pages }}.
            </p>
        </div>

        <!-- if BOOK -->
        <div *ngIf="book != null"> 
            <p>
                <span *ngFor="let aut of authors | sortBySurname; last as isLast">
                    {{ aut.name }} {{ aut.surname }}<span *ngIf="isLast == false">, </span>
                </span>,
                <i [innerHTML]="book?.title | htmlSanitizer"></i>,
                <span *ngIf="book?.collaborators != null">{{ book?.collaborators }},</span>
                {{ publisherLight?.location }},
                {{ publisherLight?.name }},
                {{ book?.date | knoradatesFormatting }}.
            </p>
        </div>

        <!-- if BOOK SECTION -->
        <div *ngIf="bookSection != null">
            <p>
                <span *ngFor="let aut of authors | sortBySurname; last as isLast">
                    {{ aut.name }} {{ aut.surname }}<span *ngIf="isLast == false">, </span>
                </span>,
                « <span [innerHTML]="bookSection?.title | htmlSanitizer"></span> »,
                <i>{{ bookSection?.book }}</i>,
                <span *ngIf="bookSection?.collaborators != null">{{ bookSection?.collaborators }},</span>
                {{ publisherLight?.location }},
                {{ publisherLight?.name }},
                {{ book?.date | knoradatesFormatting }}.
            </p>
        </div>

    </div>

    